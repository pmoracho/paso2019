summarise(VOTOS=sum(VOTOS_AGRUPACION))
mesas_totales_lista %>%
filter(CODIGO_MESA == "0100100001X") %>%
mutate(URL=get_telegrama_url(CODIGO_MESA)) %>%
group_by(CODIGO_CATEGORIA, URL) %>%
summarise(VOTOS=sum(VOTOS_LISTA))
mesas_totales %>%
filter(CODIGO_MESA == "0100100001X")
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones) %>%
inner_join(categorias) %>%
inner_join(mesas) %>%
filter(CODIGO_CATEGORIA == '000100000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n())
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones) %>%
inner_join(categorias) %>%
inner_join(mesas) %>%
filter(CODIGO_CATEGORIA == '000100000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n()) %>%
arrange(-Cantidad)
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones) %>%
inner_join(categorias) %>%
inner_join(mesas) %>%
filter(CODIGO_CATEGORIA == '000100000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n()) %>%
arrange(Cantidad)
categorias
# Mesas con votos para el FDT en 0 para Gobernador y Vice Gobernador Buenos Aires
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones) %>%
inner_join(categorias) %>%
inner_join(mesas) %>%
filter(CODIGO_CATEGORIA == '000402000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n()) %>%
arrange(Cantidad)
# Mesas con votos para Presidente y Vicepresidente de la República
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones) %>%
inner_join(categorias) %>%
inner_join(mesas) %>%
filter(CODIGO_CATEGORIA == '000100000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n()) %>%
arrange(Cantidad)
# Mesas con votos para Presidente y Vicepresidente de la República
mesas_totales_x_agrupacion %>%
inner_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
inner_join(categorias, by = "CODIGO_CATEGORIA") %>%
inner_join(mesas, by = "CODIGO_MESA") %>%
filter(CODIGO_CATEGORIA == '000100000000000',
ESCRUTADA == TRUE,
VOTOS_AGRUPACION == 0) %>%
group_by(NOMBRE_AGRUPACION) %>%
summarize(Cantidad = n()) %>%
arrange(Cantidad)
mesas_totales_x_agrupacion
mesas_totales_x_agrupacion %>%
group_by(CODIGO_AGRUPACION, CODIGO_CATEGORIA) %>%
summarize(VOTOS_AGRUPACION = sum(VOTOS_AGRUPACION))
mesas_totales_x_agrupacion %>%
group_by(CODIGO_AGRUPACION, CODIGO_CATEGORIA) %>%
summarize(VOTOS_AGRUPACION = sum(VOTOS_AGRUPACION)) %>%
inner_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
inner_join(categorias, by = "CODIGO_CATEGORIA")
mesas_totales_x_agrupacion %>%
group_by(CODIGO_AGRUPACION, CODIGO_CATEGORIA) %>%
summarize(VOTOS_AGRUPACION = sum(VOTOS_AGRUPACION)) %>%
inner_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
inner_join(categorias, by = "CODIGO_CATEGORIA") %>%
arrange(CODIGO_CATEGORIA, VOTOS_AGRUPACION)
mesas_totales_x_agrupacion %>%
group_by(CODIGO_AGRUPACION, CODIGO_CATEGORIA) %>%
summarize(VOTOS_AGRUPACION = sum(VOTOS_AGRUPACION)) %>%
inner_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
inner_join(categorias, by = "CODIGO_CATEGORIA") %>%
arrange(CODIGO_CATEGORIA, -VOTOS_AGRUPACION)
head(mesas)
listas
head(listas)
head(mesas_totales_agrp_politica)
View(listas)
View(mesas)
View(mesas_totales_agrp_politica)
View(mesas)
# Todas las mesas
mesas_totales %>%
distinct(CODIGO_MESA) %>%
left_join(mesas_totales_agrp_politica %>%
group_by(CODIGO_MESA) %>%
summarise(ESCRUTADA = ifelse(sum(VOTOS_AGRUPACION)==0, FALSE, TRUE)),
by = "CODIGO_MESA") -> mesas
View(mesas)
mesas_totales_x_agrupacion
# Total de mesas Escrutadas Si/No
mesas %>%
group_by(ESCRUTADA) %>%
summarise(Cantidad = n()) %>%
mutate(Escrutadas = ifelse(ESCRUTADA, "Si", "No"),
TotalMesas = nrow(mesas),
Porcentaje = Cantidad/TotalMesas) %>%
select(Escrutadas, Cantidad, Porcentaje)
mesas_totales_agrp_politica %>%
select(CODIGO_AGRUPACION, CODIGO_CATEGORIA, CODIGO_MESA, VOTOS_AGRUPACION) -> agrupacion_categoria_mesas
View(agrupacion_categoria_mesas)
devtools::load_all(".")
devtools::document()
str(agrupaciones)
str(mesas)
mesas_totales %>%
distinct(CODIGO_MESA) %>%
left_join(mesas_totales_agrp_politica %>%
group_by(CODIGO_MESA) %>%
summarise(ESCRUTADA = ifelse(sum(VOTOS_AGRUPACION)==0, FALSE, TRUE)),
by = "CODIGO_MESA") -> mesas
usethis::use_data(mesas)
usethis::use_data(mesas, overwrite=TRUE)
str(mesas)
descripcion_regiones
str(descripcion_regiones)
str(descripcion_postulaciones)
str(mesas_totales_lista)
library("tidyverse")
library("paso2019")
mesas_totales %>%
distinct(CODIGO_MESA) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=n()) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=n_distinct()) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=row_number()) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
select(id=row_number()) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=row_number()) %>%
select(id, codigo_mesa = CODIGO_MESA) %>%
head()
str(mesas_totales)
glimpse(mesas_totales)
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) %>%
head()
glimpse(mesas_totales)
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) %>%
head()
mesas_totales %>%
distinct(CODIGO_MESA) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) %>%
head()
mesas_totales %>%
GROUP_BY(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
head()
mesas_totales %>%
group_by(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
head()
mesas_totales %>%
group_by(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number())
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number())
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) %>%
glimpse()
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) %>%
glimpse() -> mesas
str(descripcion_postulaciones)
glipse(descripcion_postulaciones)
glimpse(descripcion_postulaciones)
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
select(id,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) -> mesas
descripcion_postulaciones %>%
distinct(CODIGO_CATEGORIA, NOMBRE_CATEGORIA) %>%
mutate(id=row_number()) %>%
select(id,
codigo_categoria = CODIGO_CATEGORIA,
nombre_categoria = NOMBRE_CATEGORIA) -> categorias
glimpse(categorias)
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id=row_number()) %>%
select(id_mesa,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) -> mesas
mesas_totales %>%
distinct(CODIGO_MESA, CODIGO_DISTRITO, CODIGO_CIRCUITO) %>%
mutate(id_mesa=row_number()) %>%
select(id_mesa,
codigo_mesa = CODIGO_MESA,
codigo_distrito = CODIGO_DISTRITO,
codigo_circuito = CODIGO_CIRCUITO) -> mesas
descripcion_postulaciones %>%
distinct(CODIGO_CATEGORIA, NOMBRE_CATEGORIA) %>%
mutate(id_categoria=row_number()) %>%
select(id_categoria,
codigo_categoria = CODIGO_CATEGORIA,
nombre_categoria = NOMBRE_CATEGORIA) -> categorias
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA) %>%
mutate(id_lista = row_number()) %>%
select(id_lista,
codigo_lista = CODIGO_LISTA,
nombre_lista = NOMBRE_LISTA) -> listas
descripcion_postulaciones
glimpse(descripcion_postulaciones)
descripcion_postulaciones %>%
distinct(CODIGO_AGRUPACION, NOMBRE_AGRUPACION) %>%
mutate(id_agrupacion = row_number()) %>%
select(id_agrupacion,
codigo_agrupacion = CODIGO_AGRUPACION,
nombre_agrupacion = NOMBRE_AGRUPACION) -> agrupacion
agrupacion
glimpse(agrupacion)
mesas_totales %>%
glimpse()
descripcion_postulaciones %>%  glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_AGRUPACION, NOMBRE_AGRUPACION) %>%
mutate(id_agrupacion = row_number()) %>%
select(id_agrupacion,
codigo_agrupacion = CODIGO_AGRUPACION,
nombre_agrupacion = NOMBRE_AGRUPACION) -> agrupacion
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA) %>%
mutate(id_lista = row_number()) %>%
left_join(agrupaciones) %>%
select(id_lista,
id_agrupacion = id_agrupacion,
codigo_lista = CODIGO_LISTA,
nombre_lista = NOMBRE_LISTA) -> listas
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
mutate(id_lista = row_number()) %>%
left_join(agrupaciones) %>%
select(id_lista,
id_agrupacion = id_agrupacion,
codigo_lista = CODIGO_LISTA,
nombre_lista = NOMBRE_LISTA) -> listas
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
mutate(id_lista = row_number()) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION")
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
mutate(id_lista = row_number()) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
glimpse()
agrupacion
agrupacion %>%  glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
mutate(id_lista = row_number()) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_AGRUPACION, NOMBRE_AGRUPACION) %>%
mutate(id_agrupacion = row_number()) %>%
select(id_agrupacion,
codigo_agrupacion = CODIGO_AGRUPACION,
nombre_agrupacion = NOMBRE_AGRUPACION) -> agrupacion
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = "CODIGO_AGRUPACION") %>%
mutate(id_lista = row_number()) %>%
glimpse()
agrupacion %>%  glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion") %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("codigo_agrupacion" = "CODIGO_AGRUPACION")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_AGRUPACION, NOMBRE_AGRUPACION) %>%
mutate(id_agrupacion = row_number()) %>%
select(id_agrupacion,
codigo_agrupacion = CODIGO_AGRUPACION,
nombre_agrupacion = NOMBRE_AGRUPACION) -> agrupaciones
agrupaciones %>%  glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("codigo_agrupacion" = "CODIGO_AGRUPACION")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
select(id_lista,
id_agrupacion,
codigo_lista = CODIGO_LISTA,
nombre_lista = NOMBRE_LISTA) -> listas
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
glimpse()
descripcion_postulaciones %>%
distinct(CODIGO_LISTA, NOMBRE_LISTA, CODIGO_AGRUPACION) %>%
left_join(agrupaciones, by = c("CODIGO_AGRUPACION" = "codigo_agrupacion")) %>%
mutate(id_lista = row_number()) %>%
select(id_lista,
id_agrupacion,
codigo_lista = CODIGO_LISTA,
nombre_lista = NOMBRE_LISTA) -> listas
listas %>%   glimpse()
listas %>%
left_join(agrupaciones) %>%
glimpse()
listas %>%
left_join(agrupaciones) %>%
View()
mesas_totales_agrp_politica %>%
glimpse()
mesas_totales_agrp_politica %>%
distinct(CODIGO_MESA) %>%
left_join(mesas, by = c("CODIGO_MESA" = "codigo_mesa")) %>%
mutate(id_telegrama = row_number()) %>%
select(id_telegrama,
id_mesa) -> telegramas
telegramas
View(telegramas)
glimpse(mesas_totales_agrp_politica)
glimpse(mesas_totales_lista)
mesas_totales_lista %>%
distinct(CODIGO_MESA, CODIGO_CATEGORIA, CODIGO_LISTA, VOTOS_LISTA) %>%
left_join(mesas, by = c("CODIGO_MESA" = "codigo_mesa")) %>%
left_join(categorias, by = c("CODIGO_CATEGORIA" = "codigo_categoria")) %>%
mutate(id_voto = row_number()) %>%
select(id_voto,
id_mesa,
id_categoria)  %>%
View()
glimpse(mesas_totales_lista)
mesas_totales_lista %>%
distinct(CODIGO_MESA, CODIGO_CATEGORIA, CODIGO_LISTA, VOTOS_LISTA) %>%
left_join(mesas, by = c("CODIGO_MESA" = "codigo_mesa")) %>%
left_join(categorias, by = c("CODIGO_CATEGORIA" = "codigo_categoria")) %>%
left_join(listas, by = c("CODIGO_LISTA" = "codigo_lista")) %>%
mutate(id_voto = row_number()) %>%
select(id_voto,
id_mesa,
id_categoria,
id_lista,
votos = VOTOS_LISTA)  -> votos
usethis::use_data(agrupaciones, overwrite = TRUE)
usethis::use_data(categorias, overwrite = TRUE)
usethis::use_data(listas, overwrite = TRUE)
usethis::use_data(mesas, overwrite = TRUE)
usethis::use_data(votos, overwrite = TRUE)
glimpse(votos)
votos %>%
group_by(id_mesa) %>%
summarise(votos = sum(votos),
escrutada = votos > 0)
mesas %>%
left_join(votos %>%
group_by(id_mesa) %>%
summarise(votos = sum(votos),
escrutada = votos > 0)
) %>%
glimpse()
mesas %>%
left_join(votos %>%
group_by(id_mesa) %>%
summarise(votos = sum(votos),
escrutada = votos > 0)
) %>%
select(id_mesa, codigo_mesa, codigo_distrito, codigo_circuito, escrutada) -> mesas
usethis::use_data(mesas, overwrite = TRUE)
votos %>%
left_join(listas) %>%
left_join(agrupaciones) %>%
left_join(categorias) %>%
glimpse()
votos %>%
left_join(listas) %>%
left_join(agrupaciones) %>%
left_join(categorias) %>%
View()
categorias
grep(categorias$nombre_categoria, 'Presiden')
grep('Presiden',categorias$nombre_categoria)
votos %>%
left_join(listas) %>%
left_join(agrupaciones) %>%
left_join(categorias) %>%
filter(categoria_id == 137) %>%
group_by(nombre_agrupacion) %>%
summarise(votos = sum(votos))
votos %>%
left_join(listas) %>%
left_join(agrupaciones) %>%
left_join(categorias) %>%
filter(id_categoria == 137) %>%
group_by(nombre_agrupacion) %>%
summarise(votos = sum(votos))
votos %>%
left_join(listas) %>%
left_join(agrupaciones) %>%
left_join(categorias) %>%
filter(id_categoria == 137) %>%
group_by(nombre_agrupacion) %>%
summarise(votos = sum(votos)) %>%
arrange(-votos)
votos %>%
left_join(listas,, by = "id_lista") %>%
left_join(agrupaciones, by = "id_agrupacion") %>%
left_join(categorias, by = "id_categoria") %>%
filter(id_categoria == 137) %>%
group_by(nombre_agrupacion) %>%
summarise(votos = sum(votos)) %>%
arrange(-votos)
View()
votos %>%
left_join(listas,, by = "id_lista") %>%
left_join(agrupaciones, by = "id_agrupacion") %>%
left_join(categorias, by = "id_categoria") %>%
filter(id_categoria == 137) %>%
group_by(nombre_agrupacion) %>%
summarise(votos = sum(votos)) %>%
arrange(-votos)
